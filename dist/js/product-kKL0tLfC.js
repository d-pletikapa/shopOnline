import"./index-Cjo8lf0I.js";function s(){return window.location.search.substring(1).replace(/\.html$/,"")}async function d(t){try{const e=await fetch(`https://adventurous-fifth-hedge.glitch.me/api/goods/${t}`);if(!e.ok)throw new Error("Ошибка загрузки товара");return await e.json()}catch(e){return console.error("Ошибка при получении товара:",e),null}}function u(t){if(!t)return;const e=document.querySelector(".product__title");e&&(e.textContent=t.title);const r=document.querySelector(".price__after-disc"),n=document.querySelector(".price__before-disc");let o=t.price;t.discount&&t.discount>0?(o=Math.round(t.price*(1-t.discount/100)),n&&(n.textContent=`${Number(t.price).toLocaleString()} ₽`,n.style.display="")):n&&(n.style.display="none"),r&&(r.textContent=`${Number(o).toLocaleString()} ₽`);const i=document.querySelector(".description__text");i&&(i.textContent=t.description);const c=document.querySelector(".product__img");if(c){const a=`https://adventurous-fifth-hedge.glitch.me/${t.image}`;c.innerHTML=`
      <picture>
        <img src="${a}" alt="${t.title}" style="width:420px; height:295px;">
      </picture>
    `}}function l(){let t=localStorage.getItem("cartId");return t||(t="cart_"+Math.random().toString(36).substr(2,9),localStorage.setItem("cartId",t)),t}function f(){const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}function g(t){localStorage.setItem("cart",JSON.stringify(t))}function m(t){const e=f(),r=e.find(n=>n.id===t);r?(r.count+=1,r.selected=!0):e.push({id:t,count:1}),g(e)}function h(t){const e=document.querySelector(".add-to-card__action-btn");e&&e.addEventListener("click",()=>{l(),m(t),e.textContent="В корзине!",e.disabled=!0,setTimeout(()=>{e.textContent="Добавить в корзину",e.disabled=!1},1500)})}async function y(){const t=s();if(!t)return;const e=await d(t);u(e),h(e.id)}document.addEventListener("DOMContentLoaded",y);
